{% extends 'base3.html' %}

{% block title %}Comunidade - Matec{% endblock %}

{% block conteudo %}
<div class="community-container">
    <!-- Hero Section -->
    <section class="community-hero">
        <div class="hero-content">
            <h1 class="hero-title">Comunidade Matec</h1>
            <p class="hero-subtitle">Conecte-se, colabore e cres√ßa junto com milhares de estudantes</p>
            <div class="community-stats">
                <div class="stat-item">
                    <span class="stat-number">1,247</span>
                    <span class="stat-label">Estudantes</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">89</span>
                    <span class="stat-label">Grupos Ativos</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">2,156</span>
                    <span class="stat-label">Discuss√µes</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Features -->
    <section class="community-features">
        <div class="features-container">
            <!-- Forum Section -->
            <div class="feature-section forum-section">
                <div class="section-header">
                    <div class="section-icon">üí¨</div>
                    <div class="section-info">
                        <h2>F√≥rum de Discuss√µes</h2>
                        <p>Tire d√∫vidas, compartilhe conhecimento e ajude outros estudantes</p>
                    </div>
                    <button class="section-btn" onclick="openForumModal()">Participar</button>
                </div>
                <div class="recent-topics">
                    <div class="topic-item">
                        <span class="topic-tag">Fra√ß√µes</span>
                        <span class="topic-title">Como resolver fra√ß√µes com denominadores diferentes?</span>
                        <span class="topic-meta">Por Maria ‚Ä¢ h√° 2h ‚Ä¢ 5 respostas</span>
                    </div>
                    <div class="topic-item">
                        <span class="topic-tag">IFRN</span>
                        <span class="topic-title">Dicas para a prova de matem√°tica do IFRN 2024</span>
                        <span class="topic-meta">Por Jo√£o ‚Ä¢ h√° 4h ‚Ä¢ 12 respostas</span>
                    </div>
                </div>
            </div>

            <!-- Study Groups -->
            <div class="feature-section groups-section">
                <div class="section-header">
                    <div class="section-icon">üë•</div>
                    <div class="section-info">
                        <h2>Grupos de Estudo</h2>
                        <p>Junte-se a grupos colaborativos e estude em equipe</p>
                    </div>
                    <button class="section-btn" onclick="openGroupsModal()">Explorar</button>
                </div>
                <div class="groups-grid">
                    <div class="group-card">
                        <div class="group-header">
                            <span class="group-name">Matem√°tica IFRN 2024</span>
                            <span class="group-members">24 membros</span>
                        </div>
                        <p class="group-desc">Prepara√ß√£o focada no exame do IFRN</p>
                        <span class="group-activity">Ativo agora</span>
                    </div>
                    <div class="group-card">
                        <div class="group-header">
                            <span class="group-name">Fra√ß√µes & Propor√ß√µes</span>
                            <span class="group-members">18 membros</span>
                        </div>
                        <p class="group-desc">Dominando fra√ß√µes e propor√ß√µes</p>
                        <span class="group-activity">Ativo h√° 1h</span>
                    </div>
                </div>
            </div>

            <!-- Community Tools -->
            <div class="community-tools">
                <div class="tool-item ranking-tool">
                    <div class="tool-icon">üèÜ</div>
                    <div class="tool-content">
                        <h3>Ranking</h3>
                        <p>Veja os estudantes mais ativos</p>
                        <div class="top-users">
                            <span class="user-badge">1¬∫ Carlos - 1,250 pts</span>
                            <span class="user-badge">2¬∫ Ana - 980 pts</span>
                        </div>
                    </div>
                    <button class="tool-btn" onclick="openRankingModal()">Ver Mais</button>
                </div>

                <div class="tool-item chat-tool">
                    <div class="tool-icon">üí≠</div>
                    <div class="tool-content">
                        <h3>Chat ao Vivo</h3>
                        <p>Converse em tempo real</p>
                        <div class="online-status">
                            <span class="online-dot"></span>
                            <span>47 estudantes online</span>
                        </div>
                    </div>
                    <button class="tool-btn" onclick="openChatModal()">Entrar</button>
                </div>

                <div class="tool-item mentoring-tool">
                    <div class="tool-icon">üéì</div>
                    <div class="tool-content">
                        <h3>Mentoria</h3>
                        <p>Receba orienta√ß√£o personalizada</p>
                        <div class="mentors-available">
                            <span>8 mentores dispon√≠veis</span>
                        </div>
                    </div>
                    <button class="tool-btn" onclick="openMentoringModal()">Solicitar</button>
                </div>

                <div class="tool-item challenges-tool">
                    <div class="tool-icon">‚ö°</div>
                    <div class="tool-content">
                        <h3>Desafios</h3>
                        <p>Resolva desafios semanais</p>
                        <div class="challenge-info">
                            <span>Desafio atual: Fra√ß√µes Complexas</span>
                        </div>
                    </div>
                    <button class="tool-btn" onclick="openChallengesModal()">Participar</button>
                </div>
            </div>
        </div>
    </section>
</div>

<style>
/* Community-specific styles - maintaining site consistency */
.community-container {
    min-height: 100vh;
    background: linear-gradient(135deg, #f8fffe 0%, #e8f5f0 100%);
    font-family: 'Poppins', sans-serif;
}

.community-hero {
    background: linear-gradient(135deg, var(--primary-color) 0%, #006b47 100%);
    color: white;
    padding: 80px 20px 60px;
    text-align: center;
    position: relative;
    overflow: hidden;
}

.community-hero::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="rgba(255,255,255,0.1)"/><circle cx="80" cy="40" r="1.5" fill="rgba(255,255,255,0.1)"/><circle cx="40" cy="70" r="1" fill="rgba(255,255,255,0.1)"/></svg>');
    animation: float 20s infinite linear;
}

@keyframes float {
    0% { transform: translateY(0px); }
    100% { transform: translateY(-100px); }
}

.hero-content {
    max-width: 800px;
    margin: 0 auto;
    position: relative;
    z-index: 1;
}

.hero-title {
    font-family: 'Fjalla One', serif;
    font-size: 3.5rem;
    margin-bottom: 20px;
    letter-spacing: 2px;
}

.hero-subtitle {
    font-size: 1.3rem;
    margin-bottom: 40px;
    opacity: 0.9;
}

.community-stats {
    display: flex;
    justify-content: center;
    gap: 60px;
    margin-top: 40px;
}

.stat-item {
    text-align: center;
}

.stat-number {
    display: block;
    font-family: 'Fjalla One', serif;
    font-size: 2.5rem;
    font-weight: bold;
    margin-bottom: 5px;
}

.stat-label {
    font-size: 1rem;
    opacity: 0.8;
}

.community-features {
    padding: 60px 20px;
    max-width: 1200px;
    margin: 0 auto;
}

.feature-section {
    background: white;
    border-radius: 20px;
    padding: 40px;
    margin-bottom: 40px;
    box-shadow: 0 10px 30px rgba(0, 143, 94, 0.1);
    border: 1px solid rgba(0, 143, 94, 0.1);
}

.section-header {
    display: flex;
    align-items: center;
    gap: 20px;
    margin-bottom: 30px;
}

.section-icon {
    font-size: 3rem;
    min-width: 80px;
    text-align: center;
}

.section-info {
    flex: 1;
}

.section-info h2 {
    font-family: 'Fjalla One', serif;
    font-size: 2rem;
    color: var(--secondary-color);
    margin-bottom: 10px;
    letter-spacing: 1px;
}

.section-info p {
    color: var(--text-light);
    font-size: 1.1rem;
}

.section-btn {
    background: var(--primary-color);
    color: white;
    border: none;
    padding: 15px 30px;
    border-radius: 25px;
    font-family: 'Fjalla One', serif;
    font-size: 1.1rem;
    cursor: pointer;
    transition: all 0.3s ease;
    letter-spacing: 1px;
}

.section-btn:hover {
    background: #006b47;
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(0, 143, 94, 0.3);
}

.recent-topics {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.topic-item {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 20px;
    background: var(--light-bg);
    border-radius: 12px;
    border-left: 4px solid var(--primary-color);
    transition: all 0.3s ease;
}

.topic-item:hover {
    transform: translateX(5px);
    box-shadow: 0 5px 15px rgba(0, 143, 94, 0.1);
}

.topic-tag {
    background: var(--primary-color);
    color: white;
    padding: 4px 12px;
    border-radius: 15px;
    font-size: 0.8rem;
    font-weight: 600;
    width: fit-content;
}

.topic-title {
    font-weight: 600;
    color: var(--secondary-color);
    font-size: 1.1rem;
}

.topic-meta {
    color: var(--text-light);
    font-size: 0.9rem;
}

.groups-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
}

.group-card {
    background: var(--light-bg);
    padding: 25px;
    border-radius: 15px;
    border: 2px solid transparent;
    transition: all 0.3s ease;
}

.group-card:hover {
    border-color: var(--primary-color);
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0, 143, 94, 0.15);
}

.group-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

.group-name {
    font-weight: 600;
    color: var(--secondary-color);
    font-size: 1.1rem;
}

.group-members {
    background: var(--primary-color);
    color: white;
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 0.8rem;
}

.group-desc {
    color: var(--text-light);
    margin-bottom: 15px;
    line-height: 1.5;
}

.group-activity {
    color: var(--primary-color);
    font-size: 0.9rem;
    font-weight: 600;
}

.community-tools {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 25px;
    margin-top: 40px;
}

.tool-item {
    background: white;
    padding: 30px;
    border-radius: 20px;
    box-shadow: 0 8px 25px rgba(0, 143, 94, 0.1);
    border: 1px solid rgba(0, 143, 94, 0.1);
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
}

.tool-item:hover {
    transform: translateY(-8px);
    box-shadow: 0 15px 35px rgba(0, 143, 94, 0.15);
}

.tool-icon {
    font-size: 3rem;
    margin-bottom: 20px;
}

.tool-content h3 {
    font-family: 'Fjalla One', serif;
    font-size: 1.5rem;
    color: var(--secondary-color);
    margin-bottom: 10px;
    letter-spacing: 1px;
}

.tool-content p {
    color: var(--text-light);
    margin-bottom: 15px;
}

.tool-btn {
    background: var(--primary-color);
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 20px;
    font-family: 'Poppins', sans-serif;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-top: auto;
}

.tool-btn:hover {
    background: #006b47;
    transform: translateY(-2px);
}

.top-users {
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.user-badge {
    background: var(--light-bg);
    padding: 5px 10px;
    border-radius: 10px;
    font-size: 0.9rem;
    color: var(--text-color);
}

.online-status {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    color: var(--primary-color);
    font-weight: 600;
}

.online-dot {
    width: 8px;
    height: 8px;
    background: #4CAF50;
    border-radius: 50%;
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0% { opacity: 1; }
    50% { opacity: 0.5; }
    100% { opacity: 1; }
}

.mentors-available {
    color: var(--primary-color);
    font-weight: 600;
}

.challenge-info {
    color: var(--primary-color);
    font-weight: 600;
    font-size: 0.9rem;
}

/* Responsive Design */
@media (max-width: 768px) {
    .hero-title {
        font-size: 2.5rem;
    }
    
    .hero-subtitle {
        font-size: 1.1rem;
    }
    
    .community-stats {
        flex-direction: column;
        gap: 30px;
    }
    
    .section-header {
        flex-direction: column;
        text-align: center;
        gap: 15px;
    }
    
    .feature-section {
        padding: 25px;
    }
    
    .community-tools {
        grid-template-columns: 1fr;
    }
    
    .groups-grid {
        grid-template-columns: 1fr;
    }
}
</style>

<!-- Modals -->
<!-- Forum Modal -->
<div id="forumModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>F√≥rum de Discuss√µes</h2>
            <span class="close" onclick="closeModal('forumModal')">&times;</span>
        </div>
        <div class="modal-body">
            <div class="forum-actions">
                <button onclick="openNewTopicModal()" class="section-btn">+ Nova Discuss√£o</button>
            </div>
            <div class="topics-list">
                <div class="topic-card" onclick="viewTopic(1)">
                    <div class="topic-header">
                        <span class="topic-tag">Fra√ß√µes</span>
                        <span class="topic-time">h√° 2 horas</span>
                    </div>
                    <h4>Como resolver fra√ß√µes com denominadores diferentes?</h4>
                    <p>Estou com dificuldade para somar fra√ß√µes que t√™m denominadores diferentes...</p>
                    <div class="topic-stats">
                        <span>Por Maria Silva</span>
                        <span>5 respostas ‚Ä¢ 23 visualiza√ß√µes</span>
                    </div>
                </div>
                <div class="topic-card" onclick="viewTopic(2)">
                    <div class="topic-header">
                        <span class="topic-tag">IFRN</span>
                        <span class="topic-time">h√° 4 horas</span>
                    </div>
                    <h4>Dicas para a prova de matem√°tica do IFRN 2024</h4>
                    <p>Pessoal, algu√©m que j√° passou no IFRN pode dar dicas sobre como estudar...</p>
                    <div class="topic-stats">
                        <span>Por Jo√£o Santos</span>
                        <span>12 respostas ‚Ä¢ 89 visualiza√ß√µes</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Groups Modal -->
<div id="groupsModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Grupos de Estudo</h2>
            <span class="close" onclick="closeModal('groupsModal')">&times;</span>
        </div>
        <div class="modal-body">
            <div class="groups-list">
                <div class="group-item">
                    <div class="group-info">
                        <h4>Matem√°tica IFRN 2024</h4>
                        <p>Prepara√ß√£o focada no exame do IFRN com exerc√≠cios e simulados</p>
                        <div class="group-meta">
                            <span>24 membros</span>
                            <span>Ativo agora</span>
                        </div>
                    </div>
                    <button onclick="joinGroup('Matem√°tica IFRN 2024')" class="join-btn">Participar</button>
                </div>
                <div class="group-item">
                    <div class="group-info">
                        <h4>Fra√ß√µes & Propor√ß√µes</h4>
                        <p>Dominando fra√ß√µes, propor√ß√µes e regra de tr√™s</p>
                        <div class="group-meta">
                            <span>18 membros</span>
                            <span>Ativo h√° 1h</span>
                        </div>
                    </div>
                    <button onclick="joinGroup('Fra√ß√µes & Propor√ß√µes')" class="join-btn">Participar</button>
                </div>
                <div class="group-item">
                    <div class="group-info">
                        <h4>Resolu√ß√£o de Exerc√≠cios</h4>
                        <p>Resolvemos exerc√≠cios em conjunto e compartilhamos m√©todos</p>
                        <div class="group-meta">
                            <span>31 membros</span>
                            <span>Ativo h√° 30min</span>
                        </div>
                    </div>
                    <button onclick="joinGroup('Resolu√ß√£o de Exerc√≠cios')" class="join-btn">Participar</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Ranking Modal -->
<div id="rankingModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Ranking da Comunidade</h2>
            <span class="close" onclick="closeModal('rankingModal')">&times;</span>
        </div>
        <div class="modal-body">
            <div class="ranking-tabs">
                <button class="tab-btn active" onclick="switchRankingTab('pontos')">Pontos</button>
                <button class="tab-btn" onclick="switchRankingTab('perguntas')">Perguntas</button>
                <button class="tab-btn" onclick="switchRankingTab('respostas')">Respostas</button>
            </div>
            <div class="ranking-list">
                <div class="rank-item">
                    <span class="position">1¬∫</span>
                    <div class="user-info">
                        <span class="username">Carlos Lima</span>
                        <span class="user-points">1,250 pontos</span>
                    </div>
                    <div class="rank-badge gold">üèÜ</div>
                </div>
                <div class="rank-item">
                    <span class="position">2¬∫</span>
                    <div class="user-info">
                        <span class="username">Ana Costa</span>
                        <span class="user-points">980 pontos</span>
                    </div>
                    <div class="rank-badge silver">ü•à</div>
                </div>
                <div class="rank-item">
                    <span class="position">3¬∫</span>
                    <div class="user-info">
                        <span class="username">Pedro Alves</span>
                        <span class="user-points">875 pontos</span>
                    </div>
                    <div class="rank-badge bronze">ü•â</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Chat Modal -->
<div id="chatModal" class="modal">
    <div class="modal-content chat-modal">
        <div class="modal-header">
            <h2>Chat ao Vivo</h2>
            <div class="online-users">47 online</div>
            <span class="close" onclick="closeModal('chatModal')">&times;</span>
        </div>
        <div class="chat-container">
            <div class="chat-messages">
                <div class="message">
                    <span class="message-user">Maria:</span>
                    <span class="message-text">Algu√©m pode me ajudar com esta quest√£o de fra√ß√µes?</span>
                    <span class="message-time">14:20</span>
                </div>
                <div class="message">
                    <span class="message-user">Jo√£o:</span>
                    <span class="message-text">Claro! Qual √© a d√∫vida?</span>
                    <span class="message-time">14:21</span>
                </div>
                <div class="message">
                    <span class="message-user">Ana:</span>
                    <span class="message-text">Estou estudando para o IFRN tamb√©m, vamos formar um grupo?</span>
                    <span class="message-time">14:22</span>
                </div>
            </div>
            <div class="chat-input">
                <input type="text" placeholder="Digite sua mensagem..." id="chatInput">
                <button onclick="sendMessage()" class="send-btn">Enviar</button>
            </div>
        </div>
    </div>
</div>

<!-- Mentoring Modal -->
<div id="mentoringModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Mentoria Online</h2>
            <span class="close" onclick="closeModal('mentoringModal')">&times;</span>
        </div>
        <div class="modal-body">
            <div class="mentors-grid">
                <div class="mentor-card">
                    <div class="mentor-avatar">üë®‚Äçüéì</div>
                    <div class="mentor-info">
                        <h4>Prof. Carlos</h4>
                        <p>Especialista em Fra√ß√µes e Propor√ß√µes</p>
                        <div class="mentor-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (4.9)</div>
                        <div class="mentor-status available">Dispon√≠vel</div>
                    </div>
                    <button onclick="requestMentoring('Prof. Carlos')" class="mentor-btn">Solicitar</button>
                </div>
                <div class="mentor-card">
                    <div class="mentor-avatar">üë©‚Äçüéì</div>
                    <div class="mentor-info">
                        <h4>Ana Silva</h4>
                        <p>Aprovada IFRN 2023 - Matem√°tica</p>
                        <div class="mentor-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (4.8)</div>
                        <div class="mentor-status busy">Ocupado</div>
                    </div>
                    <button onclick="requestMentoring('Ana Silva')" class="mentor-btn" disabled>Indispon√≠vel</button>
                </div>
                <div class="mentor-card">
                    <div class="mentor-avatar">üë®‚Äçüéì</div>
                    <div class="mentor-info">
                        <h4>Jo√£o Santos</h4>
                        <p>Monitor de Matem√°tica B√°sica</p>
                        <div class="mentor-rating">‚≠ê‚≠ê‚≠ê‚≠ê (4.7)</div>
                        <div class="mentor-status available">Dispon√≠vel</div>
                    </div>
                    <button onclick="requestMentoring('Jo√£o Santos')" class="mentor-btn">Solicitar</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Challenges Modal -->
<div id="challengesModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Desafios Matem√°ticos</h2>
            <span class="close" onclick="closeModal('challengesModal')">&times;</span>
        </div>
        <div class="modal-body">
            <div class="current-challenge">
                <h3>Desafio da Semana</h3>
                <div class="challenge-card active">
                    <h4>‚ö° Fra√ß√µes Complexas</h4>
                    <p>Resolva 5 exerc√≠cios de fra√ß√µes com denominadores diferentes em menos de 10 minutos</p>
                    <div class="challenge-reward">üèÜ Recompensa: 50 pontos</div>
                    <div class="challenge-participants">127 participantes</div>
                    <button onclick="startChallenge('fracoes-complexas')" class="challenge-btn">Iniciar Desafio</button>
                </div>
            </div>
            <div class="upcoming-challenges">
                <h3>Pr√≥ximos Desafios</h3>
                <div class="challenge-card upcoming">
                    <h4>üìä Propor√ß√µes R√°pidas</h4>
                    <p>Desafio de regra de tr√™s e propor√ß√µes</p>
                    <div class="challenge-date">Dispon√≠vel em 3 dias</div>
                </div>
                <div class="challenge-card upcoming">
                    <h4>üéØ IFRN Simulado</h4>
                    <p>Simulado completo estilo IFRN</p>
                    <div class="challenge-date">Dispon√≠vel em 1 semana</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- New Topic Modal -->
<div id="newTopicModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Nova Discuss√£o</h2>
            <span class="close" onclick="closeModal('newTopicModal')">&times;</span>
        </div>
        <div class="modal-body">
            <form id="newTopicForm">
                <div class="form-group">
                    <label for="topicTitle">T√≠tulo da Discuss√£o:</label>
                    <input type="text" id="topicTitle" placeholder="Digite o t√≠tulo da sua discuss√£o" required>
                </div>
                <div class="form-group">
                    <label for="topicCategory">Categoria:</label>
                    <select id="topicCategory" required>
                        <option value="">Selecione uma categoria</option>
                        <option value="fracoes">Fra√ß√µes</option>
                        <option value="ifrn">IFRN</option>
                        <option value="proporcoes">Propor√ß√µes</option>
                        <option value="geral">Geral</option>
                        <option value="duvidas">D√∫vidas</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="topicContent">Conte√∫do:</label>
                    <textarea id="topicContent" rows="6" placeholder="Descreva sua d√∫vida ou compartilhe seu conhecimento..." required></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" onclick="closeModal('newTopicModal')" class="cancel-btn">Cancelar</button>
                    <button type="submit" class="submit-btn">Publicar Discuss√£o</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Topic View Modal -->
<div id="topicViewModal" class="modal">
    <div class="modal-content topic-view-modal">
        <div class="modal-header">
            <h2 id="topicViewTitle">Visualizar Discuss√£o</h2>
            <span class="close" onclick="closeModal('topicViewModal')">&times;</span>
        </div>
        <div class="modal-body">
            <div id="topicViewContent">
                <!-- Topic content will be loaded here -->
            </div>
            <div class="topic-responses">
                <h3>Respostas</h3>
                <div id="responsesList">
                    <!-- Responses will be loaded here -->
                </div>
                <div class="new-response">
                    <h4>Sua Resposta</h4>
                    <textarea id="newResponseText" rows="4" placeholder="Digite sua resposta..."></textarea>
                    <button onclick="submitResponse()" class="submit-btn">Enviar Resposta</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Modal Functions
function openForumModal() {
    document.getElementById('forumModal').style.display = 'block';
    document.body.style.overflow = 'hidden';
}

function openGroupsModal() {
    document.getElementById('groupsModal').style.display = 'block';
    document.body.style.overflow = 'hidden';
}

function openRankingModal() {
    document.getElementById('rankingModal').style.display = 'block';
    document.body.style.overflow = 'hidden';
}

function openChatModal() {
    document.getElementById('chatModal').style.display = 'block';
    document.body.style.overflow = 'hidden';
}

function openMentoringModal() {
    document.getElementById('mentoringModal').style.display = 'block';
    document.body.style.overflow = 'hidden';
}

function openChallengesModal() {
    document.getElementById('challengesModal').style.display = 'block';
    document.body.style.overflow = 'hidden';
}

function closeModal(modalId) {
    document.getElementById(modalId).style.display = 'none';
    document.body.style.overflow = 'auto';
}

// Forum Functions
function openNewTopicModal() {
    document.getElementById('newTopicModal').style.display = 'block';
    document.body.style.overflow = 'hidden';
}

function viewTopic(topicId) {
    // Sample topic data - in a real app, this would come from a backend
    const topics = {
        1: {
            title: "Como resolver fra√ß√µes com denominadores diferentes?",
            category: "Fra√ß√µes",
            author: "Maria Silva",
            time: "h√° 2 horas",
            content: "Estou com dificuldade para somar fra√ß√µes que t√™m denominadores diferentes. Por exemplo, como somar 1/3 + 1/4? Algu√©m pode me explicar o passo a passo?",
            responses: [
                {
                    author: "Jo√£o Santos",
                    time: "h√° 1 hora",
                    content: "Oi Maria! Para somar fra√ß√µes com denominadores diferentes, voc√™ precisa encontrar o MMC (M√≠nimo M√∫ltiplo Comum) dos denominadores. No seu exemplo: MMC(3,4) = 12. Ent√£o: 1/3 = 4/12 e 1/4 = 3/12. Somando: 4/12 + 3/12 = 7/12"
                },
                {
                    author: "Ana Costa",
                    time: "h√° 45 min",
                    content: "Excelente explica√ß√£o, Jo√£o! S√≥ complementando: sempre verifique se o resultado pode ser simplificado. No caso de 7/12, n√£o d√° para simplificar mais porque 7 e 12 n√£o t√™m divisores comuns al√©m do 1."
                }
            ]
        },
        2: {
            title: "Dicas para a prova de matem√°tica do IFRN 2024",
            category: "IFRN",
            author: "Jo√£o Santos",
            time: "h√° 4 horas",
            content: "Pessoal, algu√©m que j√° passou no IFRN pode dar dicas sobre como estudar matem√°tica para a prova? Quais s√£o os assuntos que mais caem?",
            responses: [
                {
                    author: "Carlos Lima",
                    time: "h√° 3 horas",
                    content: "Foco em: fra√ß√µes, propor√ß√µes, regra de tr√™s, porcentagem e equa√ß√µes do 1¬∫ grau. Esses s√£o os que mais aparecem!"
                }
            ]
        }
    };
    
    const topic = topics[topicId];
    if (topic) {
        document.getElementById('topicViewTitle').textContent = topic.title;
        
        const content = `
            <div class="topic-main">
                <div class="topic-header">
                    <span class="topic-tag">${topic.category}</span>
                    <span class="topic-time">${topic.time}</span>
                </div>
                <h3>${topic.title}</h3>
                <p class="topic-content">${topic.content}</p>
                <div class="topic-author">Por ${topic.author}</div>
            </div>
        `;
        
        document.getElementById('topicViewContent').innerHTML = content;
        
        const responsesList = document.getElementById('responsesList');
        responsesList.innerHTML = '';
        
        topic.responses.forEach(response => {
            const responseDiv = document.createElement('div');
            responseDiv.className = 'response-item';
            responseDiv.innerHTML = `
                <div class="response-header">
                    <span class="response-author">${response.author}</span>
                    <span class="response-time">${response.time}</span>
                </div>
                <p class="response-content">${response.content}</p>
            `;
            responsesList.appendChild(responseDiv);
        });
        
        document.getElementById('topicViewModal').style.display = 'block';
        document.body.style.overflow = 'hidden';
    }
}

function submitNewTopic() {
    const title = document.getElementById('topicTitle').value.trim();
    const category = document.getElementById('topicCategory').value;
    const content = document.getElementById('topicContent').value.trim();
    
    if (title && category && content) {
        // In a real app, this would send data to backend
        showNotification('Discuss√£o criada com sucesso! üéâ', 'success');
        
        // Reset form
        document.getElementById('newTopicForm').reset();
        closeModal('newTopicModal');
        
        // Optionally refresh forum modal content
        setTimeout(() => {
            closeModal('forumModal');
            openForumModal();
        }, 1000);
    } else {
        showNotification('Por favor, preencha todos os campos obrigat√≥rios.', 'error');
    }
}

function submitResponse() {
    const responseText = document.getElementById('newResponseText').value.trim();
    
    if (responseText) {
        // In a real app, this would send data to backend
        const responsesList = document.getElementById('responsesList');
        const newResponse = document.createElement('div');
        newResponse.className = 'response-item';
        newResponse.innerHTML = `
            <div class="response-header">
                <span class="response-author">Voc√™</span>
                <span class="response-time">agora</span>
            </div>
            <p class="response-content">${responseText}</p>
        `;
        responsesList.appendChild(newResponse);
        
        document.getElementById('newResponseText').value = '';
        showNotification('Resposta enviada com sucesso! üí¨', 'success');
        
        // Scroll to new response
        newResponse.scrollIntoView({ behavior: 'smooth' });
    } else {
        showNotification('Por favor, digite sua resposta.', 'error');
    }
}

// Groups Functions
function joinGroup(groupName) {
    alert(`Voc√™ se juntou ao grupo "${groupName}"! Funcionalidade completa ser√° implementada em breve.`);
}

// Ranking Functions
function switchRankingTab(tabType) {
    // Remove active class from all tabs
    document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
    // Add active class to clicked tab
    event.target.classList.add('active');
    
    // Here you would load different ranking data based on tabType
    console.log(`Switching to ${tabType} ranking`);
}

// Chat Functions
function sendMessage() {
    const input = document.getElementById('chatInput');
    const message = input.value.trim();
    
    if (message) {
        const messagesContainer = document.querySelector('.chat-messages');
        const newMessage = document.createElement('div');
        newMessage.className = 'message';
        newMessage.innerHTML = `
            <span class="message-user">Voc√™:</span>
            <span class="message-text">${message}</span>
            <span class="message-time">${new Date().toLocaleTimeString('pt-BR', {hour: '2-digit', minute: '2-digit'})}</span>
        `;
        messagesContainer.appendChild(newMessage);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
        input.value = '';
    }
}

// Mentoring Functions
function requestMentoring(mentorName) {
    showNotification(`Solicita√ß√£o de mentoria enviada para ${mentorName}! üéì\nVoc√™ receber√° uma notifica√ß√£o quando a sess√£o for confirmada.`, 'success');
    
    // Update button state
    const buttons = document.querySelectorAll('.mentor-btn');
    buttons.forEach(btn => {
        if (btn.textContent === 'Solicitar' && btn.onclick.toString().includes(mentorName)) {
            btn.textContent = 'Solicitado';
            btn.disabled = true;
            btn.style.background = '#28a745';
        }
    });
}

// Challenges Functions
function startChallenge(challengeId) {
    showNotification(`Iniciando desafio: ${challengeId}! ‚ö°\nBoa sorte! Voc√™ tem 10 minutos para completar.`, 'success');
    
    // In a real app, this would redirect to the challenge page
    setTimeout(() => {
        showNotification('Redirecionando para a p√°gina do desafio...', 'info');
        closeModal('challengesModal');
    }, 2000);
}

// Notification System
function showNotification(message, type = 'info') {
    // Remove existing notifications
    const existingNotification = document.querySelector('.notification');
    if (existingNotification) {
        existingNotification.remove();
    }
    
    const notification = document.createElement('div');
    notification.className = `notification notification-${type}`;
    notification.innerHTML = `
        <div class="notification-content">
            <span class="notification-message">${message}</span>
            <button class="notification-close" onclick="this.parentElement.parentElement.remove()">&times;</button>
        </div>
    `;
    
    document.body.appendChild(notification);
    
    // Auto remove after 5 seconds
    setTimeout(() => {
        if (notification.parentElement) {
            notification.remove();
        }
    }, 5000);
}

// Close modals when clicking outside
window.onclick = function(event) {
    if (event.target.classList.contains('modal')) {
        event.target.style.display = 'none';
        document.body.style.overflow = 'auto';
    }
}

// Close modals with ESC key
document.addEventListener('keydown', function(event) {
    if (event.key === 'Escape') {
        const modals = document.querySelectorAll('.modal');
        modals.forEach(modal => {
            if (modal.style.display === 'block') {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        });
    }
});

// Event Listeners
document.addEventListener('DOMContentLoaded', function() {
    // Chat input enter key
    const chatInput = document.getElementById('chatInput');
    if (chatInput) {
        chatInput.addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        });
    }
    
    // New topic form submission
    const newTopicForm = document.getElementById('newTopicForm');
    if (newTopicForm) {
        newTopicForm.addEventListener('submit', function(event) {
            event.preventDefault();
            submitNewTopic();
        });
    }
});
</script>

<style>
/* Modal Styles */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(3px);
}

.modal-content {
    background-color: white;
    margin: 5% auto;
    padding: 0;
    border-radius: 15px;
    width: 90%;
    max-width: 600px;
    max-height: 80vh;
    overflow-y: auto;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    animation: modalSlideIn 0.3s ease;
}

.modal-content.chat-modal {
    max-width: 700px;
    height: 70vh;
    max-height: 70vh;
}

@keyframes modalSlideIn {
    from {
        opacity: 0;
        transform: translateY(-50px) scale(0.9);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 30px;
    border-bottom: 1px solid #eee;
    background: linear-gradient(135deg, var(--primary-color), #006b47);
    color: white;
    border-radius: 15px 15px 0 0;
}

.modal-header h2 {
    margin: 0;
    font-family: 'Fjalla One', serif;
    font-size: 1.5rem;
}

.close {
    color: white;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: all 0.3s ease;
}

.close:hover {
    background-color: rgba(255, 255, 255, 0.2);
    transform: scale(1.1);
}

.modal-body {
    padding: 30px;
}

/* Forum Modal Styles */
.forum-actions {
    text-align: center;
    margin-bottom: 30px;
}

.topics-list {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.topic-card {
    background: var(--light-bg);
    padding: 20px;
    border-radius: 12px;
    border-left: 4px solid var(--primary-color);
    cursor: pointer;
    transition: all 0.3s ease;
}

.topic-card:hover {
    transform: translateX(5px);
    box-shadow: 0 5px 15px rgba(0, 143, 94, 0.1);
}

.topic-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
}

.topic-stats {
    display: flex;
    justify-content: space-between;
    margin-top: 15px;
    font-size: 0.9rem;
    color: var(--text-light);
}

/* Groups Modal Styles */
.groups-list {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.group-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    background: var(--light-bg);
    border-radius: 12px;
    border: 2px solid transparent;
    transition: all 0.3s ease;
}

.group-item:hover {
    border-color: var(--primary-color);
    transform: translateY(-2px);
}

.group-info h4 {
    color: var(--secondary-color);
    margin-bottom: 8px;
}

.group-meta {
    display: flex;
    gap: 15px;
    font-size: 0.9rem;
    color: var(--text-light);
    margin-top: 10px;
}

.join-btn {
    background: var(--primary-color);
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 20px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
}

.join-btn:hover {
    background: #006b47;
    transform: translateY(-2px);
}

/* Ranking Modal Styles */
.ranking-tabs {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-bottom: 30px;
}

.tab-btn {
    padding: 10px 20px;
    border: 2px solid var(--primary-color);
    background: transparent;
    color: var(--primary-color);
    border-radius: 20px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-family: 'Poppins', sans-serif;
    font-weight: 600;
}

.tab-btn.active,
.tab-btn:hover {
    background: var(--primary-color);
    color: white;
}

.ranking-list {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.rank-item {
    display: flex;
    align-items: center;
    gap: 20px;
    padding: 15px;
    background: var(--light-bg);
    border-radius: 12px;
    transition: all 0.3s ease;
}

.rank-item:hover {
    transform: translateX(5px);
}

.position {
    font-family: 'Fjalla One', serif;
    font-size: 1.2rem;
    color: var(--primary-color);
    min-width: 40px;
}

.user-info {
    flex: 1;
}

.username {
    display: block;
    font-weight: 600;
    color: var(--secondary-color);
}

.user-points {
    color: var(--text-light);
    font-size: 0.9rem;
}

.rank-badge {
    font-size: 1.5rem;
}

/* Chat Modal Styles */
.online-users {
    background: rgba(255, 255, 255, 0.2);
    padding: 5px 12px;
    border-radius: 15px;
    font-size: 0.9rem;
}

.chat-container {
    display: flex;
    flex-direction: column;
    height: 100%;
}

.chat-messages {
    flex: 1;
    max-height: 400px;
    overflow-y: auto;
    padding: 20px;
    background: var(--light-bg);
    border-radius: 10px;
    margin-bottom: 20px;
}

.message {
    margin-bottom: 15px;
    padding: 10px;
    background: white;
    border-radius: 8px;
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}

.message-user {
    font-weight: 600;
    color: var(--primary-color);
}

.message-text {
    flex: 1;
    color: var(--text-color);
}

.message-time {
    font-size: 0.8rem;
    color: var(--text-light);
}

.chat-input {
    display: flex;
    gap: 10px;
}

.chat-input input {
    flex: 1;
    padding: 12px;
    border: 2px solid #ddd;
    border-radius: 20px;
    font-family: 'Poppins', sans-serif;
}

.chat-input input:focus {
    outline: none;
    border-color: var(--primary-color);
}

.send-btn {
    background: var(--primary-color);
    color: white;
    border: none;
    padding: 12px 20px;
    border-radius: 20px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
}

.send-btn:hover {
    background: #006b47;
}

/* Mentoring Modal Styles */
.mentors-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
}

.mentor-card {
    background: var(--light-bg);
    padding: 20px;
    border-radius: 12px;
    text-align: center;
    border: 2px solid transparent;
    transition: all 0.3s ease;
}

.mentor-card:hover {
    border-color: var(--primary-color);
    transform: translateY(-5px);
}

.mentor-avatar {
    font-size: 3rem;
    margin-bottom: 15px;
}

.mentor-info h4 {
    color: var(--secondary-color);
    margin-bottom: 8px;
}

.mentor-rating {
    margin: 10px 0;
    color: #ffa500;
}

.mentor-status {
    padding: 4px 12px;
    border-radius: 15px;
    font-size: 0.8rem;
    font-weight: 600;
    margin: 10px 0;
}

.mentor-status.available {
    background: #d4edda;
    color: #155724;
}

.mentor-status.busy {
    background: #f8d7da;
    color: #721c24;
}

.mentor-btn {
    background: var(--primary-color);
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 20px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
    margin-top: 10px;
}

.mentor-btn:hover:not(:disabled) {
    background: #006b47;
}

.mentor-btn:disabled {
    background: #ccc;
    cursor: not-allowed;
}

/* Challenges Modal Styles */
.current-challenge {
    margin-bottom: 30px;
}

.challenge-card {
    background: var(--light-bg);
    padding: 25px;
    border-radius: 12px;
    margin-bottom: 15px;
    border: 2px solid transparent;
    transition: all 0.3s ease;
}

.challenge-card.active {
    border-color: var(--primary-color);
    background: linear-gradient(135deg, #f8fffe, #e8f5f0);
}

.challenge-card.upcoming {
    opacity: 0.7;
}

.challenge-card h4 {
    color: var(--secondary-color);
    margin-bottom: 10px;
}

.challenge-reward {
    color: var(--primary-color);
    font-weight: 600;
    margin: 10px 0;
}

.challenge-participants {
    color: var(--text-light);
    font-size: 0.9rem;
    margin-bottom: 15px;
}

.challenge-date {
    color: var(--text-light);
    font-style: italic;
}

.challenge-btn {
    background: var(--primary-color);
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 20px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
}

.challenge-btn:hover {
    background: #006b47;
    transform: translateY(-2px);
}

/* New Topic Modal Styles */
.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: var(--secondary-color);
}

.form-group input,
.form-group select,
.form-group textarea {
    width: 100%;
    padding: 12px;
    border: 2px solid #ddd;
    border-radius: 8px;
    font-family: 'Poppins', sans-serif;
    font-size: 1rem;
    transition: border-color 0.3s ease;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
    outline: none;
    border-color: var(--primary-color);
}

.form-group textarea {
    resize: vertical;
    min-height: 120px;
}

.form-actions {
    display: flex;
    gap: 15px;
    justify-content: flex-end;
    margin-top: 30px;
}

.cancel-btn {
    background: #6c757d;
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 20px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
}

.cancel-btn:hover {
    background: #5a6268;
}

.submit-btn {
    background: var(--primary-color);
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 20px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
}

.submit-btn:hover {
    background: #006b47;
    transform: translateY(-2px);
}

/* Topic View Modal Styles */
.topic-view-modal {
    max-width: 800px;
    max-height: 85vh;
}

.topic-main {
    background: var(--light-bg);
    padding: 25px;
    border-radius: 12px;
    margin-bottom: 30px;
}

.topic-main .topic-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 15px;
}

.topic-main h3 {
    color: var(--secondary-color);
    margin-bottom: 15px;
    font-family: 'Fjalla One', serif;
}

.topic-content {
    line-height: 1.6;
    color: var(--text-color);
    margin-bottom: 20px;
}

.topic-author {
    color: var(--text-light);
    font-style: italic;
}

.topic-responses {
    border-top: 1px solid #eee;
    padding-top: 30px;
}

.topic-responses h3 {
    color: var(--secondary-color);
    margin-bottom: 20px;
    font-family: 'Fjalla One', serif;
}

.response-item {
    background: white;
    padding: 20px;
    border-radius: 10px;
    margin-bottom: 15px;
    border-left: 3px solid var(--primary-color);
}

.response-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
}

.response-author {
    font-weight: 600;
    color: var(--primary-color);
}

.response-time {
    color: var(--text-light);
    font-size: 0.9rem;
}

.response-content {
    line-height: 1.5;
    color: var(--text-color);
}

.new-response {
    background: var(--light-bg);
    padding: 25px;
    border-radius: 12px;
    margin-top: 25px;
}

.new-response h4 {
    color: var(--secondary-color);
    margin-bottom: 15px;
    font-family: 'Fjalla One', serif;
}

.new-response textarea {
    width: 100%;
    padding: 12px;
    border: 2px solid #ddd;
    border-radius: 8px;
    font-family: 'Poppins', sans-serif;
    resize: vertical;
    margin-bottom: 15px;
}

.new-response textarea:focus {
    outline: none;
    border-color: var(--primary-color);
}

/* Notification Styles */
.notification {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 10000;
    max-width: 400px;
    border-radius: 10px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    animation: slideInRight 0.3s ease;
}

@keyframes slideInRight {
    from {
        opacity: 0;
        transform: translateX(100%);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.notification-content {
    display: flex;
    align-items: flex-start;
    gap: 15px;
    padding: 15px 20px;
}

.notification-message {
    flex: 1;
    font-family: 'Poppins', sans-serif;
    font-weight: 500;
    line-height: 1.4;
    white-space: pre-line;
}

.notification-close {
    background: none;
    border: none;
    font-size: 18px;
    cursor: pointer;
    opacity: 0.7;
    transition: opacity 0.3s ease;
    padding: 0;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.notification-close:hover {
    opacity: 1;
}

.notification-success {
    background: linear-gradient(135deg, #d4edda, #c3e6cb);
    color: #155724;
    border-left: 4px solid #28a745;
}

.notification-error {
    background: linear-gradient(135deg, #f8d7da, #f1b0b7);
    color: #721c24;
    border-left: 4px solid #dc3545;
}

.notification-info {
    background: linear-gradient(135deg, #d1ecf1, #bee5eb);
    color: #0c5460;
    border-left: 4px solid #17a2b8;
}

/* Responsive Modal Styles */
@media (max-width: 768px) {
    .modal-content {
        width: 95%;
        margin: 10% auto;
    }
    
    .modal-header {
        padding: 15px 20px;
    }
    
    .modal-body {
        padding: 20px;
    }
    
    .mentors-grid {
        grid-template-columns: 1fr;
    }
    
    .group-item {
        flex-direction: column;
        text-align: center;
        gap: 15px;
    }
    
    .form-actions {
        flex-direction: column;
    }
    
    .notification {
        right: 10px;
        left: 10px;
        max-width: none;
    }
    
    .topic-view-modal {
        max-width: 95%;
    }
}
</style>
{% endblock %}
